test_cases:
  - test_case: "session_start_triggers_greeting"
    steps:
      # action_session_start should cause utter_greet before the first user message.
      # This matches the pattern shown in the docs for testing conversation start.
      - utter: utter_greet

  - test_case: "scenario1_new_booking_happy_path"
    steps:
      - user: |
          Hi, I'd like to book a room at Ivy Gate.

      # After the user gives all booking details, the availability lookup should run.
      - user: |
          It will be 2 people from 2025-11-20 to 2025-11-22. My name is Alex.
        assertions:
          - action_executed: "action_get_matching_rooms"

      # Caller picks an offered room and breakfast option; booking summary should be generated.
      - user: |
          I'd like the sea view double room with breakfast included.
        assertions:
          - action_executed: "action_summarize_booking"

      # Caller confirms; booking gets written and completion message is sent.
      - user: |
          Yes, please confirm this booking.
        assertions:
          - action_executed: "action_create_booking"
          - action_executed: "utter_booking_complete"

  - test_case: "scenario1_negative_guest_count_graceful"
    steps:
      - user: |
          I want to book a room for -2 people from 2025-11-20 to 2025-11-22.
        assertions:
          # We at least assert that the availability action runs and handles this input,
          # rather than the assistant crashing or ignoring it.
          - action_executed: "action_get_matching_rooms"

  - test_case: "scenario1_past_date_rejected"
    steps:
      - user: |
          I'd like to book a room for 2 people from 2020-01-01 to 2020-01-03.
        assertions:
          # The same availability action should validate dates and reject past-only stays.
          - action_executed: "action_get_matching_rooms"

  - test_case: "scenario4_dalkey_activities_standalone"
    steps:
      - user: |
          What are some fun things to do in Dalkey?
        assertions:
          # Route to the knowledge-style chitchat response, not the booking flow.
          - action_executed: "utter_free_chitchat_response"

  - test_case: "scenario4_dalkey_activities_during_booking"
    steps:
      - user: |
          Hi, I'd like to book a room.
        assertions:
          # Initial booking request should still greet / acknowledge.
          - action_executed: "utter_greet"

      - user: |
          While I'm staying, what can I do in Dalkey?
        assertions:
          # Chitchat about local activities should be handled by the chitchat pattern/utterance,
          # without breaking the main booking capability.
          - action_executed: "utter_free_chitchat_response"

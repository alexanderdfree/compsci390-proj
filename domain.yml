version: "3.1"

actions:
  - action_get_matching_rooms
  - action_find_availability
  - action_summarize_booking
  - action_create_booking

slots:
  amount_ppl:
    type: float
    mappings:
      - type: from_llm

  booking_number:
    type: float
    mappings:
      - type: from_llm

  booking_date:
    type: text
    mappings:
      - type: from_llm

  preferred_view:
    type: text
    mappings:
      - type: from_llm

  preferred_bed_type:
    type: text
    mappings:
      - type: from_llm

  preferred_bathroom_type:
    type: text
    mappings:
      - type: from_llm

  max_price_per_night:
    type: float
    mappings:
      - type: from_llm

  guest_name:
    type: text
    mappings:
      - type: from_llm

  preferred_room:
    type: text
    mappings:
      - type: from_llm

  include_breakfast:
    type: bool
    mappings:
      - type: from_llm

  confirm_booking:
    type: bool
    mappings:
      - type: from_llm

  matching_rooms:
    type: text
    mappings:
      - type: controlled

  assigned_room:
    type: text
    mappings:
      - type: controlled

  room_info:
    type: text
    mappings:
      - type: controlled

  check_in_date:
    type: text
    mappings:
      - type: controlled

  check_out_date:
    type: text
    mappings:
      - type: controlled

  booking_id:
    type: text
    mappings:
      - type: controlled

responses:
  utter_greet:
    - text: "Hello! How can I help you with the Ivy Gate B&B today?"

  utter_ask_booking_number:
    - text: "How many guests will be staying?"

  utter_ask_amount_ppl:
    - text: "How many people would you like to book for?"

  utter_ask_booking_date:
    - text: "What nights would you like to stay with us?"

  utter_ask_guest_name:
    - text: "What name should I put the booking under?"

  utter_ask_preferred_room:
    - text: "Which of the available rooms would you like to book?"

  utter_ask_include_breakfast:
    - text: "Would you like to include breakfast with your stay?"

  utter_ask_confirm_booking:
    - text: "Would you like me to confirm this booking and finalise it in our system?"

  utter_invalid_guest_count:
    - text: "I need a positive whole number of guests before I can continue. How many people will be staying?"

  utter_invalid_booking_dates:
    - text: "I couldn't quite understand those dates. Please tell me your check-in and check-out, for example '2025-11-20 to 2025-11-22'."

  utter_past_booking_dates:
    - text: "I can only help with bookings for today or future dates. Could you share a new check-in and check-out date?"

  utter_no_available_rooms:
    - text: "At the moment I don't have any rooms that match those details. You could try different dates, a shorter stay, or fewer guests."

  utter_booking_not_confirmed:
    - text: "No problem, I won't create a booking. If you'd like to adjust the dates, room type, or number of guests, just let me know."

  utter_room_too_small:
    - text: "It looks like the selected room cannot hold that many guests. Let's look for a different room with enough capacity."

  utter_booking_save_error:
    - text: "Something went wrong while saving the booking. Please try again in a moment or ask me to start over."

  utter_room_assignment: # need to
    - text: "The available room for {booking_date} is: {assigned_room}. Here is more information about the room: {room_info}."

  #utter_more_information:
  #  - text: "All done. {amount} {recipient}."

  utter_booking_complete:
    - text: "Is there anything else I can help you with for your Ivy Gate B&B stay?"

  utter_free_chitchat_response:
    - text: "placeholder"
      metadata:
        rephrase: True
        rephrase_prompt: |
          The following is a conversation with an AI assistant built with Rasa.
          The assistant can help the user book a hotel room.
          The assistant is helpful and very friendly.
          The user is making a hotel reservation or asking questions, and the assistant should respond politely but factually.
          Context / previous conversation with the user:
          {{history}}
          {{current_input}}
          Suggested AI Response:
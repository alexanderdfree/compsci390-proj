version: "3.1"

actions:
  - action_get_matching_rooms
  - action_get_available_room
  - action_find_availability
  - action_summarize_booking
  - action_make_booking
  - action_lookup_booking

slots:
  num_guests:
    type: float
    min_value: 1
    max_value: 10
    mappings:
      - type: from_llm

  guest_name:
    type: text
    mappings:
      - type: from_llm


  include_breakfast:
      type: bool
      mappings:
        - type: from_llm

  room_id:
    type: text
    mappings:
      - type: custom

  preferred_view:
    type: text
    mappings:
      - type: from_llm

  preferred_bed_type:
    type: text
    mappings:
      - type: from_llm

  preferred_bathroom_type:
    type: text
    mappings:
      - type: from_llm

  max_price_per_night:
    type: float
    mappings:
      - type: from_llm

  

  #preferred_room:
  #  type: text
  #  mappings:
  #    - type: from_llm


  booking_id_lookup:
    type: text
    mappings:
      - type: from_llm




  matching_rooms:
    type: text
    mappings:
      - type: custom


  assigned_room:
    type: text
    mappings:
      - type: custom

  room_info:
    type: text
    mappings:
      - type: custom

  check_in_date:
    type: text
    mappings:
      - type: from_llm

  check_out_date:
    type: text
    mappings:
      - type: from_llm

  confirm_booking:
    type: bool
    mappings:
      - type: from_llm

  booking_id:
    type: text
    mappings:
      - type: custom

responses:
  utter_greet:
    - text: >
        Hello! Welcome to Ivy Gate B&B in Dalkey. Are you looking to
        1) make a new booking, 2) ask about an existing booking, or
        3) get information about the B&B or things to do in Dalkey?

  utter_ask_num_guests:
    - text: "How many guests will be staying?"

  utter_ask_check_in_date:
    - text: "What nights would you like to stay with us? Please provide your check-in and check-out dates."

  utter_ask_guest_name:
    - text: "What name should I put the booking under?"

  utter_ask_preferred_room:
    - text: "Which of the available rooms would you like to book?"

  utter_ask_include_breakfast:
    - text: "Would you like to include breakfast with your stay?"

  utter_ask_confirm_booking:
    - text: "Would you like me to confirm this booking and finalise it in our system?"

  utter_ask_booking_id_lookup:
    - text: "Could you provide your booking ID or the name the booking was made under?"

  utter_invalid_guest_count:
    - text: "I need a positive whole number of guests (1-10) before I can continue. How many people will be staying?"

  utter_invalid_booking_dates:
    - text: "I couldn't quite understand those dates. Please tell me your check-in and check-out dates, for example 'November 20 to November 22' or '2025-11-20 to 2025-11-22'."

  utter_past_booking_dates:
    - text: "I can only help with bookings for today or future dates. Could you share new check-in and check-out dates?"

  utter_no_available_rooms:
    - text: "I'm afraid we don't have any rooms available that match your requirements. You could try different dates, a shorter stay, or fewer guests."

  utter_booking_not_confirmed:
    - text: "No problem, I won't create the booking. If you'd like to adjust the dates, room type, or number of guests, just let me know."

  utter_room_too_small:
    - text: "The selected room cannot accommodate that many guests. Let's look for a different room with enough capacity."

  utter_booking_save_error:
    - text: "Something went wrong while saving the booking. Please try again in a moment or let me know if you'd like to start over."

  utter_room_assignment:
    - text: "The available room from {check_in_date} to {check_out_date} is: {assigned_room}. Here's more information about the room: {room_info}."

  utter_dalkey_things_to_do:
    - text: >
        Dalkey is a charming coastal village just south of Dublin. Popular things to do include:
        - Walking up Killiney Hill for spectacular sea and coastline views
        - Visiting Dalkey Castle and Heritage Centre
        - Strolling along the harbour and around Coliemore Road
        - Enjoying caf√©s, pubs, and restaurants on Castle Street
        
        If you tell me what you enjoy (walks, history, food, etc.), I can suggest more specific ideas for your stay!

  utter_booking_complete:
    - text: "Your booking {booking_id} has been confirmed! Is there anything else I can help you with for your Ivy Gate B&B stay?"

  utter_booking_not_found:
    - text: "I couldn't find a booking with that information. Could you double-check the booking ID or name?"

  utter_free_chitchat_response:
    - text: "placeholder"
      metadata:
        rephrase: True
        rephrase_prompt: |
          The following is a conversation with an AI assistant built with Rasa.
          The assistant helps callers (in ENGLISH ONLY) with:
          - making or changing bookings for Ivy Gate B&B in Dalkey, Ireland
          - questions about existing bookings
          - information about the B&B (rooms, breakfast, pets, smoking, etc.)
          - suggestions for things to do in Dalkey and the surrounding area
          
          The assistant is helpful and friendly, but answers factually and concisely.
          If the user is in the middle of a booking, briefly answer side questions
          and then steer the conversation back to completing the booking.
          
          Context / previous conversation with the user:
          {{history}}
          {{current_input}}
          Suggested AI Response:


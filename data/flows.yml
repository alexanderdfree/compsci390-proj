flows:
  make_booking:
    description: >
      Scenario 1: Help callers make a NEW booking at Ivy Gate B&B.
      Collect number of guests and stay dates, check availability, let them
      choose a room and breakfast option, summarise the total price, then
      ONLY create the booking after explicit final confirmation.
    steps:
      - collect: num_guests
        description: >
          Number of people staying. Must be a positive number between 1-10.
          If the caller provides an invalid value (negative, zero, or non-number),
          explain the issue and ask again politely.
        utter: utter_ask_num_guests
        rejections:
          - if: slots.num_guests is not none and (slots.num_guests < 1 or slots.num_guests > 10)
            utter: utter_invalid_guest_count

      - collect: check_in_date
        description: >
          Desired check-in date for the stay. Must be today or in the future.
          Set the slot check_in_date in the format 'YYYY-MM-DD'.
        utter: utter_ask_check_in_date

      - collect: check_out_date
        description: >
          Desired check-out date for the stay. Must be after check-in date.
          Set the slot check_out_date in the format 'YYYY-MM-DD'.
        utter: utter_ask_check_out_date

      - collect: guest_name
        description: >
          Full name to put the booking under.
        utter: utter_ask_guest_name

      - collect: include_breakfast
        description: >
          Whether the guest wants breakfast included with their stay.
        utter: utter_ask_include_breakfast

      - action: action_get_available_room
        next:
          - if: slots.room_available
            then:
              - action: utter_room_assignment
              - action: action_summarize_booking
              - collect: confirm_booking
                description: >
                  Final YES/NO confirmation from the caller to create the booking.
                utter: utter_ask_confirm_booking
                next:
                  - if: slots.confirm_booking
                    then:
                      - action: action_make_booking
                      - action: utter_booking_complete
                        next: END
                  - else:
                      - action: utter_booking_not_confirmed
                        next: END
          - else:
              - action: utter_no_available_rooms
                next: END

  lookup_booking:
    description: >
      Scenario 2: Help callers find and get information about an existing booking.
    steps:
      - collect: booking_id_lookup
        description: >
          Booking ID number to look up the existing booking.
        utter: utter_ask_booking_id_lookup

      - action: action_lookup_booking

      - action: utter_booking_info